<% layout('layout') -%>
<% stylesheet('/css/app.css') -%>

<% script('/js/d3.v3.min.js') -%>
<% script('/Kickstrap/js/jquery-1.8.3.min.js') -%>
<% script('/js/jquery.blockUI.js') -%>
<% script('https://api.trello.com/1/client.js?key=afaec27e30009b0b1cfb14d85f384ee1') -%>
<% script('/js/knockout-2.2.0.js') -%>
<% script('/js/sammy-0.7.2.min.js') -%>

<% script('/js/model/nicetohave/privilegeLevel.js') -%>
<% script('/js/model/nicetohave/privilege.js') -%>
<% script('/js/model/nicetohave/comment.js') -%>
<% script('/js/model/nicetohave/card.js') -%>
<% script('/js/appViewModel2.js') -%>

    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <a class="brand" href="/">Nice to have</a>
                <div class="nav-collapse">
                    <ul class="nav">
                        <li><a href="/">Home</a></li>
                        <li class="active"><a href="/app">The App</a></li>
                    </ul>

                    <ul class="nav pull-right">
                        <li><a href="https://github.com/mikemoraned/nicetohave-app">v<%= settings.version %></a></li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div data-bind="text: privilege.level().name"></div>
        </div>

        <div class="row">
            <h1><span data-bind="text: card.id"></span>:<span data-bind="text: card.name"></span></h1>
            <button data-bind="click: card.load">Load</button>
            <div id="comments" data-bind="foreach: card.comments">
                <li><span data-bind="text: text"></span></li>
            </div>
        </div>
    </div>

<script type="application/javascript">

$(function($) {
    var model = new nicetohave.AppViewModel();

    ko.applyBindings(model);
});

</script>
