// Generated by CoffeeScript 1.4.0
(function() {
  var User, _ref;

  if ((_ref = window.nicetohave) == null) {
    window.nicetohave = {};
  }

  User = (function() {

    function User() {}

    User.prototype.privileges = ko.observable(nicetohave.Privilege.READ_ONLY);

    User.prototype.using = function(expectedPrivileges, success) {
      if (this.privileges() === expectedPrivileges) {
        return success(Trello);
      } else {
        return this.raiseTo(expectedPrivileges, success);
      }
    };

    User.prototype.raiseTo = function(expectedPrivileges, success) {
      var _this = this;
      return Trello.authorize({
        type: "popup",
        name: "Nice to have",
        success: function() {
          _this.privileges(expectedPrivileges);
          return success(Trello);
        },
        error: function() {},
        scope: expectedPrivileges.trelloScope
      });
    };

    return User;

  })();

  window.nicetohave.User = User;

}).call(this);
