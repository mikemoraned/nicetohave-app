// Generated by CoffeeScript 1.6.1
(function() {
  var Chooser, _ref,
    _this = this;

  if ((_ref = window.nicetohave) == null) {
    window.nicetohave = {};
  }

  Chooser = (function() {

    function Chooser(navigator) {
      var _this = this;
      this.navigator = navigator;
      this._parseBoardUrl = function(url) {
        return Chooser.prototype._parseBoardUrl.apply(_this, arguments);
      };
      this.navigateTo = function() {
        return Chooser.prototype.navigateTo.apply(_this, arguments);
      };
      this.navigable = function() {
        return Chooser.prototype.navigable.apply(_this, arguments);
      };
      this.boardUrl = ko.observable();
      this.boardId = ko.computed(function() {
        return _this._parseBoardUrl(_this.boardUrl());
      });
    }

    Chooser.prototype.navigable = function() {
      return this.boardId() != null;
    };

    Chooser.prototype.navigateTo = function() {
      if (this.navigable() != null) {
        return this.navigator.navigateTo(this.boardId());
      }
    };

    Chooser.prototype._parseBoardUrl = function(url) {
      var boardPattern, match;
      boardPattern = /\s*https:\/\/trello.com\/board\/.+?\/([a-z0-9]+)\s*/;
      if (url != null) {
        match = url.match(boardPattern);
        if (match != null) {
          return match[1];
        } else {
          return null;
        }
      } else {
        return null;
      }
    };

    return Chooser;

  })();

  window.nicetohave.Chooser = Chooser;

}).call(this);
