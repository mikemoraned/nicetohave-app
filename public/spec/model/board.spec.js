// Generated by CoffeeScript 1.4.0
(function() {

  describe('Board', function() {
    describe('initial state', function() {
      it('cannot be created without an id', function() {
        return expect(function() {
          return new nicetohave.Board();
        }).toThrow({
          message: "Not a valid board id: 'undefined'"
        });
      });
      it('must only accept an id of the right format (alphanumeric)', function() {
        return expect(function() {
          return new nicetohave.Board("  csdc  scd");
        }).toThrow({
          message: "Not a valid board id: '  csdc  scd'"
        });
      });
      it('must only accept an id of the right length (24)', function() {
        return expect(function() {
          return new nicetohave.Board("4eea503d91e31d174600");
        }).toThrow({
          message: "Not a valid board id: '4eea503d91e31d174600'"
        });
      });
      it('has an empty name', function() {
        var board;
        board = new nicetohave.Board("4eea503d91e31d174600008f");
        return expect(board.name()).toBe("");
      });
      it('has an id', function() {
        var board;
        board = new nicetohave.Board("4eea503d91e31d174600008f");
        return expect(board.id()).toBe("4eea503d91e31d174600008f");
      });
      return it('has a created load status', function() {
        var board;
        board = new nicetohave.Board("4eea503d91e31d174600008f");
        return expect(board.loadStatus()).toBe("created");
      });
    });
    return describe('loading', function() {
      var boardResponse, listsResponse, trello;
      trello = null;
      beforeEach(function() {
        trello = {
          boards: {
            get: function(path, params, successFn, errorFn) {}
          }
        };
        spyOn(trello.boards, 'get').andCallFake(function(path, params, successFn, errorFn) {
          if (path === '50f5c98fe0314ccd5500a51b') {
            return successFn(boardResponse);
          } else {
            if (path === '50f5c98fe0314ccd5500a51b/boards') {
              return successFn(listsResponse);
            }
          }
        });
        return spyOn(nicetohave.Card.prototype, "load");
      });
      it('when asked to load, loads name', function() {
        var board, privilige;
        privilige = new nicetohave.Privilege(trello);
        privilige.level(nicetohave.PrivilegeLevel.READ_ONLY);
        board = new nicetohave.Board("50f5c98fe0314ccd5500a51b", privilige);
        board.load();
        expect(trello.boards.get).toHaveBeenCalled();
        return expect(board.name()).toEqual("NiceToHaveTestBoard");
      });
      boardResponse = JSON.parse("{\"id\":\"50f5c98fe0314ccd5500a51b\",\"name\":\"NiceToHaveTestBoard\",\"desc\":\"\",\"closed\":false,\"idOrganization\":null,\"pinned\":true,\"url\":\"https://trello.com/board/nicetohavetestboard/50f5c98fe0314ccd5500a51b\",\"prefs\":{\"permissionLevel\":\"private\",\"voting\":\"members\",\"comments\":\"members\",\"invitations\":\"members\",\"selfJoin\":false,\"cardCovers\":true},\"labelNames\":{\"red\":\"\",\"orange\":\"\",\"yellow\":\"\",\"green\":\"\",\"blue\":\"\",\"purple\":\"\"}}");
      return listsResponse = JSON.parse("[]");
    });
  });

}).call(this);
